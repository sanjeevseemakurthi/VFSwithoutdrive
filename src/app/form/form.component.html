<div class="Bgimage">
    <div style="
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
    ">
        <input type="date" [(ngModel)]="daysheetdate" id="datepicker" />
        <button type="button" class="btn btn-warning" (click)="goback()">
            Back
        </button>
    </div>
    <mat-tab-group animationDuration="0ms" (selectedTabChange)="saveasdraft()">
        <mat-tab>
            <ng-template mat-tab-label>
                <div style="color: white; opacity: 1">Readings</div>
            </ng-template>
            <div>
                <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 mattablestyle">
                    <ng-container *ngFor="let item of displayedColumns">
                        <ng-container *ngIf="
                item === 'closing' || item === 'testing' || item === 'price';
                else noneditcols
              ">
                            <ng-container [matColumnDef]="item">
                                <th mat-header-cell *matHeaderCellDef class="cell_head">
                                    {{ item | titlecase }}
                                </th>
                                <td mat-cell *matCellDef="let element, let i =index" class="cell_head">
                                    <input type="number" [(ngModel)]="element[item]"
                                        (change)="readingrowchanged(element,item,i)"
                                        [ngClass]="{ readingsinput: item !== 'closing' }" [id]="item + i" />
                                </td>
                            </ng-container>
                        </ng-container>
                        <ng-template #noneditcols>
                            <ng-container [matColumnDef]="item">
                                <th mat-header-cell *matHeaderCellDef class="cell_head">
                                    {{ item | titlecase }}
                                </th>
                                <td mat-cell *matCellDef="let element" class="cell_head">
                                    {{ element[item] }}
                                </td>
                            </ng-container>
                        </ng-template>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
                <div style="padding: 10px; color: white">
                    Totals : {{ totaloils.toFixed(2) }}
                </div>
            </div>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                <div style="color: white; opacity: 1">Engine Oils</div>
            </ng-template>
            <div>
                <div class="col-11 Matbg">
                    <div class="row perticularrow headercol" style="padding: 10px">
                        <div class="col-sm-4 headercol">
                            <div class="eachcol">Engine Oil</div>
                        </div>
                        <div class="col-sm-4 headercol">
                            <div class="eachcol">QTY Left</div>
                            <div class="eachcol">QTY</div>
                        </div>
                        <div class="col-sm-4 headercol">
                            <div class="eachcol">price</div>
                            <div class="eachcol">Action</div>
                        </div>
                    </div>
                    <ng-container *ngFor="let eachoil of engineoils; index as i" style="overflow: scroll">
                        <div class="row perticularrow">
                            <div class="col-sm-4 headercol">
                                <div>
                                    <mat-form-field appearance="fill">
                                        <mat-label>
                                            <p style="color: white">Select Engineoil</p>
                                        </mat-label>
                                        <mat-select (selectionChange)="engineoilselected($event, i)"
                                            [(value)]="eachoil.id" (openedChange)="focusonsearchengine()">
                                            <input type="text" [(ngModel)]="engineoilsearch" placeholder="search"
                                                id="engineoilid" />
                                            <ng-container *ngFor="let oil of engineoilsoptions">
                                                <ng-container *ngIf="engineoilsoptionsfilter(oil.name)">
                                                    <mat-option [value]="oil.id">
                                                        {{ oil.name }}
                                                    </mat-option>
                                                </ng-container>
                                            </ng-container>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-4 headercol">
                                <div>
                                    {{ engineoilsoptions[eachoil.id]?.qty | json }}
                                </div>
                                <div>
                                    <input type="number" [(ngModel)]="eachoil.qty" />
                                </div>
                            </div>
                            <div class="col-sm-4 headercol">
                                <div>
                                    <input type="number" [(ngModel)]="eachoil.price"
                                        (change)="engineoilpricechange()" />
                                </div>
                                <div>
                                    <button style="color: red" (click)="removeengineoil(i)" class="buttonBg">
                                        X
                                    </button>
                                </div>
                            </div>
                        </div>
                    </ng-container>
                    <div class="totaloildisp">
                        Totals : {{ totalengineoils.toFixed(2) }}
                    </div>
                    <div class="addbutton">
                        Add &nbsp;
                        <input type="number" [(ngModel)]="page" class="buttonBg" style="width: 40px" />
                        More Oils
                        <button type="submit" class="buttonBg" (click)="addengineoils()">
                            ✓
                        </button>
                    </div>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Perticulars">
            <ng-template mat-tab-label>
                <div style="color: white; opacity: 1">Perticulars</div>
            </ng-template>
            <div>
                <div class="col-11 Matbg">
                    <div class="row perticularrow headercol " style="padding: 10px">
                        <div class="col-sm-4 headercol">
                            <div class="eachcol">Accounts</div>
                        </div>
                        <div class="col-sm-4 headercol">
                            <div class="eachcol">Credit</div>
                            <div class="eachcol">Debit</div>
                        </div>
                        <div class="col-sm-4 headercol">
                            <div class="eachcol">Action</div>
                        </div>
                        

                    </div>
                    <ng-container *ngFor="let account of perticulars; index as i">
                        <div class="row perticularrow headercol">
                            <div class="col-sm-4 headercol">
                                <div>
                                    <mat-form-field appearance="fill">
                                        <mat-select (selectionChange)="perticularsselected($event, i)"
                                            [(value)]="account.id" [disabled]="account.disable"
                                            (openedChange)="focusonsearch()">
                                            <input type="text" [(ngModel)]="perticularsearch" placeholder="search"
                                                id="perticularid" />
                                            <ng-container *ngFor="let acc of perticularoptons">
                                                <ng-container *ngIf="perticularoptonssearch(acc.name)">
                                                    <mat-option [value]="acc.id">
                                                        {{ acc.name }}
                                                    </mat-option>
                                                </ng-container>
                                            </ng-container>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-4 headercol">
                                <div>
                                    <input type="number" [(ngModel)]="account.credit" (change)="perticularchage()"
                                        [disabled]="account.disable" />
                                </div>
                                <div>
                                    <input type="number" [(ngModel)]="account.debit" (change)="perticularchage()"
                                        [disabled]="account.disable" />
                                </div>
                            </div>
                            <div class="col-sm-4 headercol">
                                <div>
                                    <button style="color: red" (click)="removeperticular(i)" class="buttonBg"
                                        [disabled]="account.disable">
                                        X
                                    </button>
                                </div>
                            </div>
                        </div>
                    </ng-container>
                    <div class="headercol" style="padding: 10px">
                        <div class="col-sm-6 headercol">
                            <div class="emptydiv">

                            </div>
                            <div class=" totaloildisp">Total : {{ leftovercash }}</div>
                        </div>
                        <div class="col-sm-6 headercol">
                            <div>
                                {{ credit }}
                            </div>
                            <div>
                                {{ debit }}
                            </div>
                        </div>
                    </div>
                    <div class="addbutton">
                        Add &nbsp;
                        <input type="number" [(ngModel)]="page" class="buttonBg" style="width: 40px" />
                        More Transactions
                        <button type="submit" class="buttonBg" (click)="addperticulars()">
                            ✓
                        </button>
                    </div>
                </div>
            </div>
            <div style="
          display: flex;
          justify-content: space-around;
          margin: 10px;
          padding: 10px;
        ">
                <a style="right: 0px" class="btn btn-primary btn-xl" (click)="confirmsubmission()">Submit</a>
                <a style="right: 0px" class="btn btn-primary btn-xl" (click)="clearall()">Clear</a>
            </div>
        </mat-tab>
    </mat-tab-group>
</div>